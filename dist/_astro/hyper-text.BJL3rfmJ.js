import{j as C}from"./jsx-runtime.CRkqtJS5.js";import{r as e}from"./index.B52nOzfP.js";import{c as S}from"./utils.CppfKf37.js";import{M as T,u as P,P as k,a as L,L as $,m as b}from"./proxy.DJqDyx_a.js";import"./clsx.B-dksMZM.js";class D extends e.Component{getSnapshotBeforeUpdate(o){const n=this.props.childRef.current;if(n&&o.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function U({children:r,isPresent:o}){const n=e.useId(),s=e.useRef(null),d=e.useRef({width:0,height:0,top:0,left:0}),{nonce:x}=e.useContext(T);return e.useInsertionEffect(()=>{const{width:m,height:t,top:u,left:i}=d.current;if(o||!s.current||!m||!t)return;s.current.dataset.motionPopId=n;const a=document.createElement("style");return x&&(a.nonce=x),document.head.appendChild(a),a.sheet&&a.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${m}px !important;
            height: ${t}px !important;
            top: ${u}px !important;
            left: ${i}px !important;
          }
        `),()=>{document.head.removeChild(a)}},[o]),C.jsx(D,{isPresent:o,childRef:s,sizeRef:d,children:e.cloneElement(r,{ref:s})})}const A=({children:r,initial:o,isPresent:n,onExitComplete:s,custom:d,presenceAffectsLayout:x,mode:m})=>{const t=P(B),u=e.useId(),i=e.useCallback(c=>{t.set(c,!0);for(const f of t.values())if(!f)return;s&&s()},[t,s]),a=e.useMemo(()=>({id:u,initial:o,isPresent:n,custom:d,onExitComplete:i,register:c=>(t.set(c,!1),()=>t.delete(c))}),x?[Math.random(),i]:[n,i]);return e.useMemo(()=>{t.forEach((c,f)=>t.set(f,!1))},[n]),e.useEffect(()=>{!n&&!t.size&&s&&s()},[n]),m==="popLayout"&&(r=C.jsx(U,{isPresent:n,children:r})),C.jsx(k.Provider,{value:a,children:r})};function B(){return new Map}const v=r=>r.key||"";function I(r){const o=[];return e.Children.forEach(r,n=>{e.isValidElement(n)&&o.push(n)}),o}const F=({children:r,exitBeforeEnter:o,custom:n,initial:s=!0,onExitComplete:d,presenceAffectsLayout:x=!0,mode:m="sync"})=>{const t=e.useMemo(()=>I(r),[r]),u=t.map(v),i=e.useRef(!0),a=e.useRef(t),c=P(()=>new Map),[f,y]=e.useState(t),[p,R]=e.useState(t);L(()=>{i.current=!1,a.current=t;for(let h=0;h<p.length;h++){const l=v(p[h]);u.includes(l)?c.delete(l):c.get(l)!==!0&&c.set(l,!1)}},[p,u.length,u.join("-")]);const E=[];if(t!==f){let h=[...t];for(let l=0;l<p.length;l++){const g=p[l],j=v(g);u.includes(j)||(h.splice(l,0,g),E.push(g))}m==="wait"&&E.length&&(h=E),R(I(h)),y(t);return}const{forceRender:M}=e.useContext($);return C.jsx(C.Fragment,{children:p.map(h=>{const l=v(h),g=t===p||u.includes(l),j=()=>{if(c.has(l))c.set(l,!0);else return;let w=!0;c.forEach(z=>{z||(w=!1)}),w&&(M?.(),R(a.current),d&&d())};return C.jsx(A,{isPresent:g,initial:!i.current||s?void 0:!1,custom:g?void 0:n,presenceAffectsLayout:x,mode:m,onExitComplete:g?void 0:j,children:h},l)})})},H="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),K=r=>Math.floor(Math.random()*r);function O({text:r,duration:o=800,framerProps:n={initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:3}},className:s,animateOnLoad:d=!0}){const[x,m]=e.useState(r.split("")),[t,u]=e.useState(!1),i=e.useRef(0),a=e.useRef(!0),c=()=>{i.current=0,u(!0)};return e.useEffect(()=>{const f=setInterval(()=>{if(!d&&a.current){clearInterval(f),a.current=!1;return}i.current<r.length?(m(y=>y.map((p,R)=>p===""?p:R<=i.current?r[R]:H[K(26)])),i.current=i.current+.1):(u(!1),clearInterval(f))},o/(r.length*10));return()=>clearInterval(f)},[r,o,t,d]),C.jsx("div",{className:"flex scale-100 cursor-default overflow-hidden pb-2",onMouseEnter:c,children:C.jsx(F,{mode:"wait",children:x.map((f,y)=>C.jsx(b.span,{className:S("font-mono",f===" "?"w-3":"",s),...n,children:f.toUpperCase()},y))})})}export{O as default};
